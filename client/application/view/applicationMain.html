<!--applicatioMain.html-->
<!--suppress HtmlUnknownTarget -->
<div class="row">
  <div class="col-md-0-6"></div>
    <div class="col-md-11">
      <div class="col-md-12">
      <div class="form-group summary-formating-right" ng-show="vm.accessMode === 'Application'">
        <h5>
          <strong>[{{vm.campaign.num}}</strong>&nbsp;-&nbsp;<strong>{{vm.campaign.positionName}}]</strong>&nbsp;&nbsp;
          <span class="campaign-criteria">Minimum Grade:{{vm.campaign.minScore}}&nbsp;&nbsp;
          Top Applicants:{{vm.campaign.topApplicant}}</span>&nbsp;&nbsp;
          <span class="campaign-actual">Pass:{{vm.applicantPassMinScore}}&nbsp;&nbsp;Revealed:{{vm.campaign.revealedApplicants}}</span>
        </h5>
      </div>
      <div class="form-group summary-formating-right" ng-show="vm.accessMode !== 'Application'">
        <h5>
          <a ui-sref="recruiter.recruiterDemand({id:vm.campaignId})"><strong>[{{vm.campaign.num}}</strong></a>&nbsp;-&nbsp;
          <a ui-sref="recruiter.recruiterDemand({id:vm.campaignId})"><strong>{{vm.campaign.positionName}}]</strong></a>&nbsp;&nbsp;&nbsp;
          <span class="campaign-criteria"> Minimum Grade:{{vm.campaign.minScore}}&nbsp;&nbsp;
          Top Applicants:{{vm.campaign.topApplicant}}</span>&nbsp;&nbsp;
          <span class="campaign-actual"> Pass:{{vm.applicantPassMinScore}}&nbsp;&nbsp;
          Revealed:{{vm.campaign.revealedApplicants}}</span>
        </h5>
      </div>
    </div>
  </div>
  <div class="col-md-0-6"></div>
</div>

<div class="row">
  <div class="col-md-0-6"></div>
  <div class="col-md-11">
    <div class="row" ng-show="vm.isRecruiter()">
      <div class="col-md-12">
        <nav class="navbar navbar-default" role="navigation">
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
              <li class="dropdown">
                  <a ng-if="vm.selectedFilter" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span>&nbsp;</span>{{vm.ENUM.APPLICATION_FILTER[vm.selectedFilter]}} <b class="caret"></b></a>
                  <a ng-if="!vm.selectedFilter" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">All<b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li ng-repeat="(key, status) in vm.ENUM.APPLICATION_FILTER"><a ng-click="vm.changeSelectedFilter(key)">{{status}}</a></li>
                    <li class="divider"></li>
                    <li><a ng-click="vm.changeSelectedFilter()">All</a></li>
                  </ul>
              </li>       
            </ul>
            <form class="navbar-form navbar-left" role="search">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Search" ng-model="vm.query">
              </div>
            </form>
            <form class="navbar-form navbar-left" role="search">
<!--               <div class="form-group">
                Sort by:
              </div> -->
              <div class="form-group">
                <div class="btn-group">
                  <button class="btn btn-xs btn-default" type="button" ng-click="vm.setSort('grade')"><span ng-class="vm.getSort('grade')"></span>Grade</button>
                  <button class="btn btn-xs btn-default" type="button" ng-click="vm.setSort('control.createDate')"><span ng-class="vm.getSort('control.createDate')"></span>Date</button>
                </div>
              </div>
            </form>        
          </div><!-- /.navbar-collapse -->
        </nav>
      </div>     
    <div>
  </div>
</div>

<div class="row">
    <div class="panel-group col-md-12">
      <!-- Application summary header -->
      <div class="panel panel-default">
        <div class="row">
            <div class="col-md-1 appl-formating-left">
                <h5><strong>ID</strong></h5>
            </div>
            <div class="col-md-2 appl-formating-left">
                <h5><strong>Date</strong></h5>
            </div>
            <div class="col-md-1 appl-formating">
                <h5><strong>Grade</strong></h5>
            </div>
            <div class="col-md-2 appl-formating-left">
                <h5><strong>First Name</strong></h5>
            </div>
            <div class="col-md-2 appl-formating-left">
                <h5><strong>Last Name</strong></h5>
            </div>
            <div class="col-md-2 appl-formating-left">
                <h5><strong>Email</strong></h5>
            </div>
            <div class="col-md-1 appl-formating-left">
                <h5><strong>Phone</strong></h5>
            </div>
        </div>
      </div>
      <!-- Application summary line -->
      <div class="panel panel-default"  ng-repeat="application in vm.applications | filter:vm.search | orderBy: vm.orderBy">
          <div class="panel-heading application-record-line">
              <a class="panel-title collapsed"  data-toggle="collapse" data-parent="#panel-campaigns-group"
              ng-click="vm.calcAuditionResults(application)" href="#panel-element-{{$index}}"  aria-expanded="false">
                  <div class="row application-general" ng-class="application.revealed ? 'revealed-record' : 'application-record'">
                      <div class="col-md-1">
                          <h5>{{application.number}}</h5>
                      </div>
                      <div class="col-md-2">
                          <h5>{{application.control.createDate | date}}</h5>
                      </div>
                      <div class="col-md-1 appl-formating">
                          <h5>{{vm.round(application.grade)}}</h5>
                      </div>
                      <div class="col-md-2">
                          <h5>{{application.firstName}}</h5>
                      </div>
                      <div class="col-md-2">
                        <div ng-show="!application.revealed">
                          <h5>************</h5>
                        </div>
                        <div ng-show="application.revealed">
                          <h5>{{application.lastName}}</h5>
                        </div>
                      </div>
                      <div class="col-md-2">
                        <div ng-show="!application.revealed">
                          <h5>************</h5>
                        </div>
                        <div ng-show="application.revealed">
                          <h5>{{application.email}}</h5>
                        </div>
                      </div>
                      <div class="col-md-1">
                        <div ng-show="!application.revealed">
                          <h5>************</h5>
                        </div>
                        <div ng-show="application.revealed">
                          <h5>{{application.phone}}</h5>
                        </div>
                      </div>
                      <div class="col-md-1" ng-hide="application.revealed">
                          <a class="btn btn-sm btn-primary reveal-btn" ng-click="vm.revealedApplicants(application)" ng-disabled="application.revealed">Reveal</a>
                      </div>
                  </div>
              </a>
          </div>
      <!-- Application summary expanded line -->
          <div id="panel-element-{{$index}}" class="panel-collapse collapse" aria-expanded="false">
              <div class="panel-body" >
                  <div class="col-md-12">
                    <h6>
                        <!-- Audition results -->
                        <div class="row col-md-7">
                            <!-- Statistics summary table -->
                            <table id="gradetbl" class="table" cellspacing="0" width="100%">
                                <thead>
                                    <tr>
                                        <th class="col-md-3">Skill</th>
                                        <th class="col-md-2">Importance</th>
                                        <th class="col-md-1">Total Chl</th>
                                        <th class="col-md-1">Chl Done</th>
                                        <th class="col-md-1">Avg Done</th>
                                        <th class="col-md-1">Max Score</th>
                                        <th class="col-md-1">Avg Score</th>
                                        <th class="col-md-1">Talent Score</th>
                                        <th class="col-md-1">% Score</th>
                                    </tr>
                                </thead>
                                <tbody >
                                    <colgroup>
                                        <col span="7" class="summary-col">
                                        <col span="2" class="summary-col-prime">
                                      </colgroup>
                                    <tr ng-repeat="results in application.auditionResults">
                                        <td>
                                          {{results.skill}}
                                        </td>
                                        <td ng-class="{'importance-nice' : totGrade.importance === 'Nice to have',
                                                         'importance-low' : totGrade.importance === 'Low',
                                                         'importance-normal' : totGrade.importance === 'Normal',
                                                         'importance-high' : totGrade.importance === 'High',
                                                         'importance-must' : totGrade.importance === 'Must have'}">
                                              {{results.importance}}
                                        </td>
                                        <td>
                                            {{vm.round(results.totalItems)}}
                                        </td>
                                        <td>
                                            {{vm.round(results.totalItemsAnswered)}}
                                        </td>
                                        <td>
                                            {{vm.round(results.avgApplicationsItemsAnswered)}}
                                        </td>
                                        <td class="max-score">
                                            {{vm.round(results.maxScore)}}
                                        </td>
                                        <td class="avg-score">
                                            {{vm.round(results.avgScore)}}
                                        </td>
                                        <td ng-class="{'arrow-up': (vm.round(results.score) >= vm.round(results.avgScore)), 'arrow-down': (vm.round(results.score) < vm.round(results.avgScore))}">
                                            {{vm.round(results.score)}}
                                        </td>
                                        <td>
                                            {{vm.round((results.score / results.maxScore) * 100)}}&#37;
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                          <!-- Audition preview -->
                          <div>
                              <a class="btn btn-sm btn-primary" ng-click="vm.viewAuditionResults(application)">View Audition</a>
                          </div>
                      </div>
                    </h6>
                    <h5>
                      <div class="row col-md-1"></div>
                      <!-- Questionnaire section -->
                      <div class = "col-md-4">
                            <div class="row" ng-if="application.goNoGo1.yes">
                                <br> {{vm.campaign.goNoGo1.text}} : <strong>{{application.goNoGo1.yes}}</strong>
                            </div>
                            <div class="row" ng-if="application.goNoGo1.no">
                                <br>{{vm.campaign.goNoGo1.text}} : <strong>{{application.goNoGo1.no}}</strong>
                            </div>
                            <div class="row" ng-if="vm.campaign.goNoGo1.text && !application.goNoGo1.yes && !application.goNoGo1.no">
                                <br>{{vm.campaign.goNoGo1.text}} : <strong>Not Answered</strong>
                            </div>
                            <div class="row" ng-if="application.goNoGo2.yes">
                              <br>  {{vm.campaign.goNoGo2.text}} : <strong>{{application.goNoGo2.yes}}</strong>
                            </div>
                            <div class="row" ng-if="application.goNoGo2.no">
                              <br>  {{vm.campaign.goNoGo2.text}} : <strong>{{application.goNoGo2.no}}</strong>
                            </div>
                            <div class="row" ng-if="vm.campaign.goNoGo2.text && !application.goNoGo2.yes && !application.goNoGo2.no">
                              <br>  {{vm.campaign.goNoGo2.text}} : <strong>Not Answered</strong>
                            </div>
                            <div class="row" ng-if="application.goNoGo4.yes">
                              <br>  Are you willing to work in {{application.goNoGo4Place}}? : <strong>{{application.goNoGo4.yes}}</strong>
                            </div>
                            <div class="row" ng-if="application.goNoGo4.no">
                              <br>  Are you willing to work in {{application.goNoGo4Place}}? : <strong>{{application.goNoGo4.no}}</strong>
                            </div>
                            <div class="row" ng-if="application.goNoGo4Place && !application.goNoGo4.yes && !application.goNoGo4.no">
                              <br>  Are you willing to work in {{application.goNoGo4Place}}? : <strong>Not Answered</strong>
                            </div>
                            <div class="row" ng-if="application.goNoGo3">
                              <br>  Salary Expectations : <strong>{{application.goNoGo3}} {{vm.campaign.salaryExpCurrency}}</strong>
                            </div>
                            <div class="row" ng-if="vm.campaign.goNoGo3.enabled && !application.goNoGo3">
                              <br>  Salary Expectations : <strong>Not Answered</strong>
                            </div>
                            <div class="row" ng-show="application.revealed">
                                <br>
                                <div ng-if="application.linkedInURL">
                                  LinkedIn Profile : <strong>{{application.linkedInURL}}</strong>
                                  <br>
                                </div>
                                <div ng-if="application.fileId">
                                    <br>
                                    <a href="{{vm.getCVLink(application.fileId).url()}}" download="{{vm.getCVLink(application.fileId).original.name}}" target="_blank"><strong>Download CV</strong></a>
                                </div>
                            </div>
                      </div>
                    </h5>
                  </div>
              </div>
          </div>
      </div>
    </div>
</div>

</div>
<div class="col-md-0-6"></div>
</div>
